{"version":3,"sources":["flexbox/api/layout-align.ts"],"names":[],"mappings":"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","file":"layout-align.js","sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Renderer,\n  SimpleChanges,\n} from '@angular/core';\nimport {Subscription} from 'rxjs/Subscription';\nimport {MediaQueryActivation} from '../media-query/media-query-activation';\nimport {MediaQueryAdapter} from '../media-query/media-query-adapter';\nimport {MediaQueryChanges, OnMediaQueryChanges} from '../media-query/media-query-changes';\nimport {BaseFxDirective} from './base';\nimport {LAYOUT_VALUES, LayoutDirective} from './layout';\n\n\n/**\n * 'layout-align' flexbox styling directive\n *  Defines positioning of child elements along main and cross axis in a layout container\n *  Optional values: {main-axis} values or {main-axis cross-axis} value pairs\n *\n *  @see https://css-tricks.com/almanac/properties/j/justify-content/\n *  @see https://css-tricks.com/almanac/properties/a/align-items/\n *  @see https://css-tricks.com/almanac/properties/a/align-content/\n */\n@Directive({selector: '[fx-layout-align]'})\nexport class LayoutAlignDirective extends BaseFxDirective implements OnInit, OnChanges,\n                                                                        OnMediaQueryChanges,\n                                                                        OnDestroy {\n  /**\n   * MediaQuery Activation Tracker\n   */\n  private _mqActivation: MediaQueryActivation;\n\n  private _layout = 'row';  // default flex-direction\n  private _layoutWatcher: Subscription;\n\n  @Input('fx-layout-align') align: string = 'start stretch';\n\n  // *******************************************************\n  // Optional input variations to support mediaQuery triggers\n  // *******************************************************\n\n  @Input('fx-layout-align.xs') alignXs;\n  @Input('fx-layout-align.gt-xs') alignGtXs;\n  @Input('fx-layout-align.sm') alignSm;\n  @Input('fx-layout-align.gt-sm') alignGtSm;\n  @Input('fx-layout-align.md') alignMd;\n  @Input('fx-layout-align.gt-md') alignGtMd;\n  @Input('fx-layout-align.lg') alignLg;\n  @Input('fx-layout-align.gt-lg') alignGtLg;\n  @Input('fx-layout-align.xl') alignXl;\n\n  constructor(\n      @Optional() public container: LayoutDirective, private _mqa: MediaQueryAdapter,\n      elRef: ElementRef, renderer: Renderer) {\n    super(elRef, renderer);\n\n    if (container) {  // Subscribe to layout direction changes\n      this._layoutWatcher = container.layout$.subscribe(this._onLayoutChange.bind(this));\n    }\n  }\n\n  // *********************************************\n  // Lifecycle Methods\n  // *********************************************\n\n  ngOnChanges(changes: SimpleChanges) {\n    let activated = this._mqActivation;\n    let activationChange = activated && changes[activated.activatedInputKey] != null;\n\n    if (changes['align'] != null || activationChange) {\n      this._updateWithValue();\n    }\n  }\n\n  /**\n   * After the initial onChanges, build an mqActivation object that bridges\n   * mql change events to onMediaQueryChange handlers\n   */\n  ngOnInit() {\n    this._mqActivation = this._mqa.attach(this, 'align', 'start stretch');\n    this._updateWithValue();\n  }\n\n  /**\n   *  Special mql callback used by MediaQueryActivation when a mql event occurs\n   */\n  onMediaQueryChanges(changes: MediaQueryChanges) {\n    this._updateWithValue(changes.current.value);\n  }\n\n\n  ngOnDestroy() {\n    if ( this._layoutWatcher ) {\n      this._layoutWatcher.unsubscribe();\n    }\n  }\n\n  // *********************************************\n  // Protected methods\n  // *********************************************\n\n  /**\n   *\n   */\n  _updateWithValue(value?: string) {\n    value = value || this.align || 'start stretch';\n    if (this._mqActivation) {\n      value = this._mqActivation.activatedInput;\n    }\n\n    this._applyStyleToElement(this._buildCSS(value));\n  }\n\n  /**\n   * Cache the parent container 'flex-direction' and update the 'flex' styles\n   */\n  _onLayoutChange(direction) {\n    this._layout = (direction || '').toLowerCase().replace('-reverse', '');\n    if (!LAYOUT_VALUES.find(x => x === this._layout))\n      this._layout = 'row';\n\n    let value = this.align || 'start stretch';\n    if (this._mqActivation) {\n      value = this._mqActivation.activatedInput;\n    }\n    this._allowStretching(value, this._layout);\n  }\n\n  _buildCSS(align) {\n    let css = {}, [main_axis, cross_axis] = align.split(' ');\n\n    css['justify-content'] = 'flex-start';  // default\n    css['align-items'] = 'stretch';         // default\n    css['align-content'] = 'stretch';       // default\n\n    // Main axis\n    switch (main_axis) {\n      case 'center':\n        css['justify-content'] = 'center';\n        break;\n      case 'space-around':\n        css['justify-content'] = 'space-around';\n        break;\n      case 'space-between':\n        css['justify-content'] = 'space-between';\n        break;\n      case 'end':\n        css['justify-content'] = 'flex-end';\n        break;\n    }\n    // Cross-axis\n    switch (cross_axis) {\n      case 'start':\n        css['align-items'] = css['align-content'] = 'flex-start';\n        break;\n      case 'baseline':\n        css['align-items'] = 'baseline';\n        break;\n      case 'center':\n        css['align-items'] = css['align-content'] = 'center';\n        break;\n      case 'end':\n        css['align-items'] = css['align-content'] = 'flex-end';\n        break;\n    }\n\n    return css;\n  }\n\n  /**\n   * Update container element to 'stretch' as needed...\n   */\n  _allowStretching(align, layout) {\n    let [, cross_axis] = align.split(' ');\n\n    if (cross_axis == 'stretch') {\n      // Use `null` values to remove style\n      this._applyStyleToElement({\n        'box-sizing': 'border-box',\n        'max-width': (layout === 'column') ? '100%' : null,\n        'max-height': (layout === 'row') ? '100%' : null\n      });\n    }\n  }\n}\n"]}